<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8">
  <title>ZHESP2 Terminal</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/xterm/css/xterm.css">
  <script src="https://cdn.jsdelivr.net/npm/xterm/lib/xterm.min.js"></script>
  <style>
    html, body {
      margin: 0;
      height: 100%;
      background: black;
      font-family: monospace;
    }
    #terminal {
      height: 100vh;
      width: 100vw;
    }
  </style>
</head>
<body>
  <div id="terminal"></div>
  <script>
    const term = new Terminal({
      cursorBlink: true,
      fontFamily: 'monospace',
      fontSize: 14,
      theme: { background: '#000000', foreground: '#00ff00' }
    });const shellPrompt = "zhesp2> ";
const welcomeMsg = [
  "ZHESP2 Terminal \u2014 version 2.4.0",
  "Type 'help' for commands.\n"
];

let buffer = '';

const delay = (ms) => new Promise(resolve => setTimeout(resolve, ms));

const commands = {
  help: `Available commands:

help       Show this help message encrypt    Encrypt a file decrypt    Decrypt a file genkey     Generate new key exit       Exit the terminal`,

genkey: `Generating key...

Key generated and saved to zhesp2.key`,

encrypt: async (args) => {
    if (!args[0]) return "Usage: encrypt <filename>";
    const filename = args[0];
    await delay(800);
    return `Encrypting ${filename}...

✓ Output: ${filename}.zhesp2 ✓ Metadata embedded ✓ Argon2id key derivation complete`; },

decrypt: async (args) => {
    if (!args[0]) return "Usage: decrypt <filename.zhesp2>";
    const filename = args[0];
    await delay(800);
    return `Decrypting ${filename}...

✓ Output: ${filename.replace(/.zhesp2$/, '')} ✓ Metadata verified ✓ AES-GCM decryption complete`; },

exit: 'exit'
};

function printPrompt() {
  term.write(`\r\n${shellPrompt}`);
}

async function handleCommand(input) {
  const [cmd, ...args] = input.trim().split(/\s+/);
  const command = commands[cmd];

  if (!command) {
    term.writeln(`Unknown command: ${cmd}`);
    return;
  }

  if (typeof command === 'string') {
    if (command === 'exit') {
      term.writeln("Exiting ZHESP2...");
      buffer = '';
      return;
    }
    term.writeln(command);
  } else if (typeof command === 'function') {
    const result = await command(args);
    term.writeln(result);
  }
}

term.open(document.getElementById('terminal'));
welcomeMsg.forEach(line => term.writeln(line));
printPrompt();

term.onKey(async ({ key, domEvent }) => {
  const char = domEvent.key;

  if (char === 'Enter') {
    term.writeln('');
    await handleCommand(buffer);
    if (buffer.trim() === 'exit') return;
    buffer = '';
    printPrompt();
  } else if (char === 'Backspace') {
    if (buffer.length > 0) {
      buffer = buffer.slice(0, -1);
      term.write('\b \b');
    }
  } else if (char.length === 1) {
    buffer += char;
    term.write(char);
  }
});

  </script>
</body>
</html>